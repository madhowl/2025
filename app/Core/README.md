# üö¶ –ü—Ä–æ—Å—Ç–æ–π –†–æ—É—Ç–µ—Ä –¥–ª—è PHP

–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π, –Ω–æ –º–æ—â–Ω—ã–π —Ä–æ—É—Ç–µ—Ä –¥–ª—è PHP-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, —Ä–∞–∑–Ω—ã–µ HTTP-–º–µ—Ç–æ–¥—ã –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—à–∏–±–æ–∫.

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª [`Router.php`](Router.php) –≤ –ø–∞–ø–∫—É –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –µ–≥–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ñ–∞–π–ª–µ (–æ–±—ã—á–Ω–æ `index.php`):

```php
require_once 'Router.php';
```

---

## üß≠ –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –°–æ–∑–¥–∞–π—Ç–µ —Ä–æ—É—Ç–µ—Ä:scream:

```php
$router = new Router();
```

### 2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –º–∞—Ä—à—Ä—É—Ç—ã

```php
// GET-–∑–∞–ø—Ä–æ—Å—ã
$router->get('/', function() {
    echo "–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞";
});

$router->get('/user/{id}', function($id) {
    echo "–ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: " . htmlspecialchars($id);
});

// POST-–∑–∞–ø—Ä–æ—Å—ã
$router->post('/submit', function() {
    echo "–î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã!";
});

// PUT, DELETE
$router->put('/user/{id}', 'UserController@update');
$router->delete('/user/{id}', 'UserController@delete');

// –õ—é–±–æ–π –º–µ—Ç–æ–¥
$router->any('/catch-all', function() {
    echo "–õ—é–±–æ–π –∑–∞–ø—Ä–æ—Å —Å—é–¥–∞";
});
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é

```php
$router->run();
```

---

## üèóÔ∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤

–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:

### –°–ø–æ—Å–æ–± 1: –°—Ç—Ä–æ–∫–∞ –≤–∏–¥–∞ `'–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä@–º–µ—Ç–æ–¥'`

```php
$router->get('/home', 'HomeController@index');
$router->get('/user/{id}', 'UserController@show');
```

> ‚ö†Ô∏è –ö–ª–∞—Å—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á—ë–Ω (—á–µ—Ä–µ–∑ `require` –∏–ª–∏ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É).

–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ (`UserController.php`):

```php
class UserController
{
    public function show($id)
    {
        echo "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ID: " . htmlspecialchars($id);
    }
}
```

### –°–ø–æ—Å–æ–± 2: –ü–µ—Ä–µ–¥–∞—á–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞

```php
$userController = new UserController();
$router->get('/user/{id}', [$userController, 'show']);
```

---

## üé® –ö–∞—Å—Ç–æ–º–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ 404

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–≤–æ–¥–∏—Ç—Å—è: `404 - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞`.

–ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `setNotFoundHandler()`:

### –ß–µ—Ä–µ–∑ –∞–Ω–æ–Ω–∏–º–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é

```php
$router->setNotFoundHandler(function() {
    echo '<h1>–û—à–∏–±–∫–∞ 404</h1>';
    echo '<p>–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. <a href="/">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a></p>';
});
```

### –ß–µ—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä

```php
$router->setNotFoundHandler('ErrorController@notFound');
```

–ü—Ä–∏–º–µ—Ä (`ErrorController.php`):

```php
class ErrorController
{
    public function notFound()
    {
        http_response_code(404); // –£–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, –Ω–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å
        include 'views/404.html';
    }
}
```

> üí° HTTP-—Å—Ç–∞—Ç—É—Å **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ 404** –¥–æ –≤—ã–∑–æ–≤–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞.

---

## üìå –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ URL**: `{name}` ‚Äî –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –ª—é–±–æ–π —Ç–µ–∫—Å—Ç –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ `/`.
  - –ü—Ä–∏–º–µ—Ä: `/post/{slug}` ‚Üí —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `/post/hello-world`, –Ω–æ –Ω–µ —Å `/post/hello/world`.
- **–ü–æ—Ä—è–¥–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤–∞–∂–µ–Ω**: –ø–µ—Ä–≤—ã–π —Å–æ–≤–ø–∞–≤—à–∏–π –º–∞—Ä—à—Ä—É—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è.
- **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—É—Ç–µ–π**: `/user/` –∏ `/user` —Å—á–∏—Ç–∞—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏.
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `htmlspecialchars()` –ø—Ä–∏ –≤—ã–≤–æ–¥–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ URL!

---

## üõ†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP 7.4+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è PHP 8.0+ –¥–ª—è `str_contains`)
- –î–ª—è PHP < 8.0 –∑–∞–º–µ–Ω–∏—Ç–µ `str_contains($a, $b)` –Ω–∞ `strpos($a, $b) !== false`

---

## üìö –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ `index.php`

```php
<?php
require_once 'Router.php';
require_once 'HomeController.php';
require_once 'ErrorController.php';

$router = new Router();

$router->get('/', function() {
    echo "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!";
});

$router->get('/user/{id}', 'HomeController@showUser');
$router->post('/submit', function() {
    echo "–§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!";
});

$router->setNotFoundHandler('ErrorController@notFound');

$router->run();
```

---

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –≤ –ª—é–±—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.
