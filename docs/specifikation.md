**Техническое задание (ТЗ) на разработку Flatfile CMS на PHP**

---

### 1. Введение

#### 1.1. Назначение документа
Настоящее техническое задание определяет требования к разработке легковесной Content Management System (CMS) на языке PHP, использующей flat-file (файловое) хранение данных вместо реляционной базы данных (например, MySQL). Цель — создать простую, безопасную и расширяемую CMS для небольших сайтов, блогов и лендингов без необходимости настройки СУБД.

#### 1.2. Целевая аудитория
- Веб-разработчики
- Владельцы небольших сайтов
- Фрилансеры и агентства, ищущие минималистичные решения

---

### 2. Общие требования

#### 2.1. Архитектура
- Язык: PHP 8.0+
- Без использования внешних баз данных (MySQL, PostgreSQL и т.д.)
- Хранение данных: JSON, Markdown и/или YAML-файлы в файловой системе
- Поддержка PSR-стандартов (PSR-4 для автозагрузки, PSR-7/15/17 при необходимости)
- Минималистичная архитектура без фреймворков (или с использованием микрофреймворка, если обосновано)
- Поддержка Composer для управления зависимостями (опционально)

#### 2.2. Совместимость
- Работа на стандартных хостингах с поддержкой PHP 8.0+
- Поддержка Apache и Nginx (через `.htaccess` или конфигурацию)
- Поддержка HTTPS

#### 2.3. Безопасность
- Защита от XSS, CSRF, LFI/RFI
- Валидация и санитизация всех входных данных
- Ограничение доступа к административной панели по паролю
- Хранение учетных данных администратора в хэшированном виде (password_hash)
- Запрет прямого доступа к данным (через `.htaccess` или настройки сервера)

---

### 3. Функциональные требования

#### 3.1. Ядро CMS
- Автозагрузка классов (PSR-4)
- Роутинг (на основе URL без использования базы данных)
- Парсинг и отображение контента из flat-файлов
- Поддержка шаблонов (движок шаблонов — собственный или Twig/Blade по выбору)
- Поддержка многоязычности (опционально, но с возможностью расширения)

#### 3.2. Административная панель (панель управления)
- Авторизация администратора (логин/пароль)
- Создание, редактирование, удаление страниц и записей блога
- Поддержка Markdown-редактора (например, SimpleMDE или аналог)
- Загрузка медиафайлов (изображения, PDF и т.д.) с валидацией типов и размеров
- Управление метаданными (title, description, keywords, slug)
- Предварительный просмотр контента
- Управление структурой меню (простой drag-and-drop или ручной ввод)

#### 3.3. Контент и структура данных
- Каждая страница/запись хранится в отдельном файле (например, `content/pages/about.md`)
- Метаданные хранятся в YAML-фронт-маттере или отдельном `.json`-файле
- Поддержка категорий и тегов для записей блога
- Поддержка черновиков и даты публикации

#### 3.4. Публичная часть сайта
- Отображение страниц и записей блога
- Генерация ЧПУ (человеко-понятных URL)
- Поддержка пагинации для блога
- Поиск по контенту (опционально, но желательно)
- Генерация sitemap.xml и robots.txt

#### 3.5. Расширяемость
- Поддержка плагинов/модулей (через хуки или события)
- Возможность подключения кастомных шаблонов (тем оформления)
- API для программного доступа к контенту (опционально)

---

### 4. Нефункциональные требования

#### 4.1. Производительность
- Минимальное потребление памяти и CPU
- Кэширование контента (опционально, через файлы или APCu)
- Быстрая загрузка страниц (< 300 мс на среднем хостинге)

#### 4.2. Удобство использования
- Простая установка (распаковать → настроить → использовать)
- Минимальная конфигурация (один файл `config.php`)
- Интуитивно понятный интерфейс админки

#### 4.3. Документация
- README с инструкцией по установке
- Пример конфигурации
- Документация по разработке тем и плагинов

---

### 5. Структура проекта (рекомендуемая)

```
/cms/
├── /admin/                 # Админка
├── /content/               # Контент (страницы, записи, медиа)
│   ├── /pages/
│   ├── /posts/
│   └── /media/
├── /themes/                # Темы оформления
│   └── /default/
├── /core/                  # Ядро CMS
├── /plugins/               # Плагины
├── /vendor/                # Зависимости (если используются)
├── config.php              # Основной конфиг
├── index.php               # Точка входа
└── .htaccess               # Настройки Apache
```

---

### 6. Этапы реализации

1. **Проектирование архитектуры и структуры данных**
2. **Реализация ядра (роутинг, парсинг контента, шаблоны)**
3. **Разработка административной панели**
4. **Тестирование безопасности и функциональности**
5. **Оптимизация и документирование**
6. **Подготовка демо-сайта и примеров использования**

---

### 7. Критерии приемки

- CMS устанавливается за ≤ 5 минут на стандартный хостинг
- Админка защищена паролем и недоступна без авторизации
- Все страницы корректно отображаются на фронтенде
- Нет уязвимостей к XSS, CSRF, LFI
- Поддержка Markdown и медиафайлов работает корректно
- Код соответствует PSR-12, покрыт комментариями

---

### 8. Дополнительно

- Лицензия: MIT или Apache 2.0
- Открытый исходный код (рекомендуется GitHub/GitLab)
- Возможность дальнейшего развития (модули, API, мультиязычность)

---

**Дата составления:** [указать дату]  
**Исполнитель:** [ФИО / Команда]  
**Заказчик:** [ФИО / Организация]

--- 

